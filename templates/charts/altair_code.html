
var {{chart.ident}}_spec = {{chart.json|safe}};
const {{chart.ident}} = document.getElementById('{{chart.ident}}');
{% if chart.ratio %}
height = {{chart.ident}}.clientWidth / {{chart.ratio}}
{{chart.ident}}.style.height = height + "px";
{% endif %}
results = await vegaEmbed("#{{chart.ident}}", {{chart.ident}}_spec, embed_opt);
const {{chart.ident}}_view = results.view;
{{chart.ident}}_print_action = document.createElement('a');
{{chart.ident}}_print_action.href = "#";
{{chart.ident}}_print_action.textContent = "Copy (for print)";
{{chart.ident}}_print_action.onclick = function(event) {toClipboardPrint({{chart.ident}}, {{chart.ident}}_view, {{chart.ident}}_spec); event.preventDefault();};
{{chart.ident}}.querySelector('.vega-actions').appendChild({{chart.ident}}_print_action)
{{chart.ident}}_web_action = document.createElement('a');
{{chart.ident}}_web_action.href = "#";
{{chart.ident}}_web_action.textContent = "Copy (for web)";
{{chart.ident}}_web_action.onclick = function(event) {toClipboard({{chart.ident}}, {{chart.ident}}_view, {{chart.ident}}_spec, "{{chart.data_source|safe}}"); event.preventDefault();};
{{chart.ident}}.querySelector('.vega-actions').appendChild({{chart.ident}}_web_action)